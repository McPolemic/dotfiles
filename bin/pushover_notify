#!/usr/bin/env ruby
require 'rushover'

$APP_TOKEN  = ENV['PUSHOVER_TERMINAL_APP_TOKEN']
$USER_TOKEN = ENV['PUSHOVER_USER_TOKEN']

def get_message
  return ARGV[0] if ARGV.count == 1
  ARGV.join(" ")
end

puts "Usage: #{$0} 'message to send'" if ARGV.empty?

client = Rushover::Client.new($APP_TOKEN)
client.notify($USER_TOKEN, get_message, :title => "Terminal Notifier")
